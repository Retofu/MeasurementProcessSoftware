:imagesdir: CourseworkMedia
:figure-caption: Рисунок
:table-caption: Таблица
:toc-title: Оглавление
:toc: macro
:stem:

include::Titul.adoc[lines="1..8"]
Разработка устройства индикации напряжения +
Пояснительная записка к курсовому проекту
include::Titul.adoc[lines="11..23"]

toc::[]

== Требования к разработке

Общие требования к курсовому проекту представлены в таблице 1.

.Требования к курсовому проекту
[cols="1,1"]
|===
|Параметр, характеристика |Требование

|Отладочная плата
|XNUCLEO-F411RE

|Способ измерения напряжения
|Встроенный АЦП

|Период измерения
|50 мс

|Получение кода измерения
|Механизм DMA

|Измерение/изменение напряжения
|Плата Accessory Shield, переменный резистор

|Точность измерения напряжения
|Не менее 0,01 В

|Общение с платой расширения
|USART2

|Передача значений по беспроводному интерфейсу
|BlueTooth Bee HC-06 или I/O Expansion Shield

|Язык приложения, компилятор
|C++, ARM 8.40.2
|===

К измеренному напряжению должен быть применен цифровой фильтр вида: +
stem:[tau = int  ((1-e^(-dt/(R*C)), RC > 0 sec), (1, RC<= 0 sec))] +
{nbsp} +
stem:["FilteredValue" = "OldValue" + ("Value" - "OldValue") * tau], +
{nbsp} +
где dt -  100 мс; +
Value – текущее нефильтрованное измеренное значение напряжения; +
oldValue -  предыдущее фильтрованное значение.

Индикация значения измеренного напряжения должна осуществляться через включение/выключение светодиодов. При максимальном напряжении софт должен зажигать 4 светодиода, при минимальном все светодиоды должны погаснуть.

Промежуточные значения напряжения должны индицироваться следующим образом:

* при 0-25% от максимального напряжения зажигается только 1 светодиод;
* при 25-50% от максимального напряжения зажигается только 2 светодиода;
* при 50-75% от максимального напряжения зажигается только 3 светодиода;
* при 75-100% от максимального напряжения зажигается все 4 светодиода.

Формат вывода: +
   "Напряжение: " X.XXX [Units]

Архитектура должна быть представлена в виде UML диаграмм в пакете Star UML. При разработке должна использоваться Операционная Система Реального Времени FreeRTOS и RtosWrapper.

== Окружение программы

Окружение программы представлено на рисунке 1.

[#Окружение_программы]
.Окружение программы
image::GeneralPartsScheme.png[]

Описание блоков в окружении программы представлено в таблице 2.

.Описание блоков
[cols="1,1"]
|===
|Блок |Описание

|Микроконтроллер
|STM32F411RE с ядром Cortex-M4 предназначен для управления периферийными устройствами. Содержит микропроцессор, ОЗУ и ПЗУ. Есть встроенный АЦП

|Аналого-цифровой преобразователь (АЦП)
|12 битный встроенный АЦП. Нужен для измерения напряжения с переменного резистора на плате расширения

|Блок светодиодов 1-4
|Светодиоды LED1-LED4 расположены на отладочной плате.

|Переменный резистор на плате расширения
|Необходим для изменения напряжения, а также для измерения напряжения с него. Напряжения меняется от 0 до 3,3 В

|Bluetooth Bee HC-06
|Модуль подключается по UART к разъемам RX и TX. Обеспечивает передачу данных по беспроводному интерфейсу

|USART2 / USB
|Модуль необходим для связи микроконтроллера и ПК

|ПК
|Персональный компьютер, на котором есть терминал для вывода данных с микроконтроллера

|===

== Анализ требований

